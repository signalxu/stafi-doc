# **Tokenomics of StaFi**

## 1.Background

Proof of stake (PoS) has become the leading consensus mechanism in the cryptocurrency industry. Over the past eight years, numerous teams have worked to address technical challenges such as nothing-at-stake and long-range attacks, leading to the development of a sophisticated PoS mechanism by 2018. In the second half of that year, a number of PoS (or PoS-like) projects, including EOS and Tezos, were launched, introducing a new generation of consensus algorithms. The following two years saw rapid development of PoS projects, including innovative public chains like Polkadot, Near, Solana, and Celo, all of which adopted PoS as their consensus mechanism.

Incentives and security are major considerations in PoS. The incentive mechanism of PoS, which is centered on security, differs from that of proof of work (PoW). Staking introduces a new type of incentive approach for PoS, leading to the emergence of staking finance as a new business model. Financial applications that implement staking as an incentive have become widespread and are constantly evolving with the development of blockchain technology. Staking has become a crucial design element in PoS projects, bringing new user experiences and security challenges.

StaFi addresses liquidity issues in staking finance through the use of rewards for staking tokens. By participating in staking, users become virtually part of the consensus process, which requires stability and security. As a result, there is a lock-up mechanism for staked tokens, which must be held for a specific period of time in order to receive rewards. However, this lock-up period can be problematic in today's volatile token markets, where drastic price fluctuations can lead to token depreciation and rewards that are insufficient to cover a staker's losses.

StaFi offers a solution through the use of unique staking contracts (SCs), which allows staked tokens to be staked and tradable at the same time. This expands the potential for users to benefit from staking and has been a focus of StaFi's efforts. \


## 2.Introduction

StaFi Protocol is built on Substrate and uses nominated proof-of-stake (NPoS) to complete staking through the creation of staking contracts that communicate with public chains. During the staking process, these contracts act as an account book and tokens staked through them are written into the contracts and eventually locked on the original chain.

To maintain StaFi Protocol, StaFi Validators (SVs) and StaFi Special Validators (SSVs) are necessary. SVs are responsible for the security of the entire protocol, while SSVs ensure the safety of all staking contracts. The selection of validators and their motivations are important considerations within the protocol framework, which will be discussed in more detail in Part 3 of this document.

FIS is the native token of StaFi and is used in three main contexts: as gas, for staking, and for value capture:

* In order to ensure the security and long-term stability of the system, StaFi uses the nominated proof-of-stake (NPoS) consensus algorithm and adapts the Polkadot architecture as a reference. The motivation curve is adjusted according to the staking ratio of FIS in order to promote cyber security and support the ongoing development of the system.
* StaFi utilizes the nominated proof-of-stake (NPoS) consensus algorithm, drawing inspiration from the underlying motivation design of Polkadot to ensure the security and longevity of the system. Through careful adjustment of the motivation curve based on the staking ratio of FIS, StaFi strives to maintain the highest levels of cyber security and support the continuous evolution of the system.
* FIS serves as a means of capturing value within the StaFi system, particularly by providing liquidity for rTokens. The Staking Contracts of StaFi not only offer staking services for users, but also ensures liquidity. StaFi Protocol charges a service fee from users in order to add value to the network. The value proposition will be further explained in part 5 of this document.

rTokens (Reward Tokens) are alternative tokens that are distributed to holders of staked tokens. As staked tokens are locked on the original chain and the lockup terms are recorded in Staking Contracts, rTokens are the only tokens that can be manipulated by these contracts. With rTokens, holders can alter the terms of the contracts, initiate additional Staking, redeem their original tokens and more. Additionally, by holding rTokens, users can earn rewards from their staked tokens, which will be explained in Part 4.

StaFi Protocol serves as an underlying protocol for crypto assets. Through rTokens, the protocol enables staked tokens traded on the market while generating income through the provision of liquidity. The value chain involves the interaction of various components, which will be outlined in the following sections.


## 3.Motivation

Substrate integrates the BABE + GRANDPA consensus mechanism. BABE is responsible for block selection and GRANDPA determines the finalization of blocks. For block selection, StaFi uses an election system. A validator obtains block weight through the staking of FIS or by being nominated by staked FIS. Once a new block is confirmed by the GRANDPA consensus, the chain that receives more than ⅔ of the vote from staked FIS becomes the final chain, and the latest block producer is rewarded.

### 3.1 StaFi Validator (SV)

#### 3.1.1 Election

Anyone who wants to participate in the network and provide security can become a validator by maintaining a node. Validators are required to be nominated by delegators. As a staker, one may stake their tokens or nominate someone else to stake, however, one's chances of becoming a validator are dependent on the total amount of tokens staked.

At launch, StaFi will require validators to ensure the security and stability of the network. Users who have a high amount of Staking will be considered for final consensus selection. However, as the network matures, StaFi Protocol will use on-chain voting to decide whether to recruit additional validators.

On the StaFi Ecosystem, time is divided into periods based on the number of blocks produced. Each block is produced approximately every 6 seconds. 1 epoch~1 hour and 1 Era~24 Epochs~24 hours. During each Era, an election for the next Era is held. Each Slot allows for multiple block producers,in which the consensus mechanism selects using the VRF algorithm. If more than one block is produced in a Slot, the block that reaches the farthest point in the network will be the final block and the respective producer rewarded.


#### 3.1.2 Withdrawal

Elected StaFi Validators (SV) are responsible for block production and voting during each era. However, if a SV fails to fulfill their responsibilities, they may be withdrawn from their position until the next election. This can occur in two situations: if a SV engages in wrongdoing and is penalized by the system through a process known as "slashing," or if they become unresponsive or offline to a significant extent, as determined by their ability to produce blocks. In either case, their nomination will be redistributed using an algorithm.

Nominations will not be motivated during the withdrawal period.


#### 3.1.3 Reward

StaFi is designed under NPoS which includes three types of activities that are eligible for rewards for StaFi Validators (SVs):

1. Producing blocks (non-uncle blocks in the relay chain)
2. Producing uncle blocks (previously unreferenced uncles)
3. Producing orphan blocks (referenced uncle blocks)

Block producers are elected through a Verifiable Random Function (VRF) algorithm to ensure reliable block production. In addition, consensus also elects alternate block producers in advance using a Round-Robin algorithm in case any block producers fail to perform their duties. This ensures that each slot is filled with newly produced blocks, with the final block being confirmed by the GRANDPA (GHOST-based Recursive Ancestor Deriving Prefix Agreement) protocol. Any blocks that are not included in the final chain are referred to as uncle or orphan blocks, and while they do receive a reward, it is generally smaller than that of the final block.

StaFi Validators (SVs) are required to contribute an equal amount of work to produce a block, regardless of whether it becomes the final block, an uncle block, or an orphan block. As a result, the reward for producing a single block is the same for all SVs. In addition, all SVs are granted equal Voting Power, regardless of the amount of nominated Stake they hold. However, the amount of Stake a person owns does determine their eligibility to be elected as an SV. \

Under NPoS, all validators have an equal chance to produce blocks, which means that reward distribution is not directly tied to the weight of a person's Stake. In contrast, some proof-of-stake (PoS) systems give individuals with more Stake a greater chance to produce blocks and earn rewards. This can lead to a concentration of staked assets among dominant block producers, with the top 10 producers often holding a majority of staked tokens. The NPoS consensus aims to address this issue by providing equal opportunities for block production, leading to a more decentralized distribution of Stake. The NPoS consensus is currently being tested on the Kusama network.

For nominators, the number of Stake validators they nominate can affect their rewards. Nominators can potentially earn more rewards by choosing to support a validator with fewer nominations, although this also carries some risks, such as the possibility of a validator being offline for an extended period, having technical limitations, or being inexperienced in running a node. Nominators should carefully consider these factors before making their decisions.

To fairly distribute rewards, StaFi records each validator's rewards for each epoch, with each reward cycle lasting one Era. Validators can claim their rewards when an Era ends, and the protocol will automatically distribute them according to the amount of Stake held. It's important to note that if rewards are not claimed within 84 Eras, they will be burned. It is highly recommended that validators claim their rewards in a timely manner.

The rewards to the completion of producing each kind of block are as follows: 


<table>
  <tr>
   <td><strong>Type</strong>
   </td>
   <td><strong>blocks</strong>
   </td>
   <td><strong>Uncle blocks</strong>
   </td>
   <td><strong>Orphan blocks</strong>
   </td>
  </tr>
  <tr>
   <td>Rewards counting
   </td>
   <td>20
   </td>
   <td>2
   </td>
   <td>1
   </td>
  </tr>
</table>


Assuming that the validator is v, the number of blocks generated in an Era e is n, the number of Uncle blocks is s, and the number of orphan blocks is x, then the total reward count r obtained by the validator during e is

$r_{e}=20 n+2 s+x$

Assuming that there are 100 validators in a set,{ that is v1,v2,v3…v100 }, then during e, the total reward count R of all validators is

$R_{e}=r_{1}+r_{2}+r_{3}+\ldots+r_{1} 00=\sum_{v=1}^{100} r_{v}$

Further, it can be deduced that

$R_{e}=\sum_{v=1}^{100}\left(20 n_{v}+2 s_{v}+x_{v}\right)$

If the Stake rate is 50% and the inflation rate is 10% at this time, the total reward during e can be calculated (for details, please check part 3):

$P_{N P o S}^{e}$

Then the reward that a single validator gets during e

$\frac{r_{v_{n}}^{R_{e}}}{R_{N P o S}^{e}}$

After deducting the fee of the validator, the nominator can get its own proportion of the remaining reward.


#### 3.1.4 Slash

Slashing is mechanism imposed on StaFi Validators (SVs) which engage in behaviors that are considered "illegal" under the NPoS consensus. These actions, which can include misconduct that may lead to system instability or even malfunction, are punished through the "forfeiture" of Stake such as rewards. These penalties are calculated on a per-era basis. There are two types of punishment that may be imposed:

**1. Off-line/Unresponsive**

If a SV fails to produce any blocks or send heartbeats tests in an era, they will be deemed offline or unresponsive. If there are a large number of offline or unresponsive nodes, the system may confiscate a portion of the Staked tokens (held by both validators and nominators) as a regulatory measure. Slashing is performed according to the formula:

$\min ((3 *(k-(n / 10+1))) / n, 1) * 0.07$

The formula calculates a penalty based on the number of offline SVs (k) in a total pool of SVs (n), where SV stands for "Stake Validator". The penalty is calculated as follows:

1. If k is less than or equal to (n/10)+1, the penalty is 0.
2. If k is greater than (n/10)+1, the penalty is calculated as 3 times the difference between k and (n/10)+1, divided by n. However, if the result of this calculation is greater than 1, the penalty is capped at 1.
3. Finally, the penalty is multiplied by 0.07.

So, in simpler terms, the penalty increases linearly with the number of offline SVs beyond a certain threshold, and it is capped at 1. The penalty is proportional to the deviation from the expected number of offline SVs (which is (n/10)+1), and its maximum value is 7% of some quantity (which is not specified in the context provided). \

Assuming n = 100,

When k = 1 ~ 11, the ratio of Slash is 0;

When k = 12, the ratio of Slash is 0.03 * 0.07 = 0.0021

When k = 21, the ratio of Slash is 0.3 * 0.07 = 0.021

When k = 31, the ratio of Slash is 0.6 * 0.07 = 0.042

When k = 41, the ratio of Slash is 0.9 * 0.07 = 0.063

When k = 51, the ratio of Slash is 1 * 0.07 = 0.07 \

Generally, the Slashing Ratio ranges from 0% to 7%. If less than 10% of all nodes are offline, a single node will not be slashed if it becomes offline or unresponsive. However, if approximately 1/3 of the nodes are offline at the same time, the Slash ratio can reach approximately 5%.


**2. Double-signing**

To maintain the security of the system, certain behaviors are considered malicious during both the block production phase (Babe consensus) and the voting phase (Grandpa consensus). These behaviors include voting on different chains during a single round and generating two new blocks in the same block slot. The penalty formula for these actions is as follows: \

$\min \left((3 k / n)^{2}, 1\right)$

n is the number of SVs, k is the number of chaotic or invalid voters of SVs.

Assuming n = 100

When k = 1, the ratio of Slash is 0.03 * 0.03 = 0.0009

When k = 10, the ratio of Slash is 0.09

When k = 21, the ratio of Slash is 0.3969

When k = 31, the ratio of Slash is 0.81

When k = 41, the ratio of Slash is 1

When k = 51, the ratio of Slash is 1

In general, the maximum Slash ratio is 1, meaning that a SV may lose 100% of their Stake as punishment. It is clear that the punishment for double-signing is more severe than for being offline. A single instance of double-signing can result in punishment. \


### 3.2 Stafi Special Validator (SSV) \

StaFi Special Validators (SSVs) are responsible for ensuring the security of Staking Contracts, which establishes a link between assets on the original chain and rTokens. These contracts are critical to the functioning of the StaFi Ecosystem. They are typically implemented as multi-signature accounts on the chain, although the specific design may vary depending on the original chain and the specific contract.

The election of SSVs is separate from that of regular SVs. SSVs are required to provide higher security measures, including signatures, RPC, and Oracle services (although the latter may not be needed during the initial phase of StaFi). These services are used to motivate SSVs, independent of that of SVs. This implies that SSVs can earn rewards not only for their own contributions, but also for those of SVs.

#### 3.2.1 Election

The number of Special Validators (SSVs) is determined based on the deployed Staking contract. Each new contract deployment requires a new batch of SSVs to manage it. The specific number of SSVs needed is based on the amount of assets being managed by the contract and the security requirements.

SSVs are elected from among the existing StaFi Validators (SVs) by deploying SSV services. The system will then select SSVs from the pool of candidates based on factors such as the amount of Stake held, online rate, and self-Stake ratio. Once a SV is successfully registered, they will be added to the SSV candidate pool. All SSVs in the pool will take turns or participate in elections when a new Staking contract is deployed.

Before each SSV election Era begins, the system will select candidates based on the SV registration status; those with larger nominations having an advantage. Additionally, the assets pledged by SSVs are all provided by SVs. However, compared to SVs, SSVs have a higher self-Stake requirement and face stricter penalties in the event of a Slash.

There are two types of SSV rotation: regular rotation and emergency rotation. Both are designed to meet the security needs of assets. Regular rotation helps to maintain the dynamic nature of SSVs and ensures that rewards are distributed fairly among all SSVs in the candidate pool. Emergency rotation occurs when the number of signers is close to the limit and is used to ensure the sufficient activity of the number of signers. For example, if each round requires N out of M signers, but the actual number of signers (S) is close to or equal to (M-N), the system will urgently replace incumbent SSVs that do not provide signatures. Both regular and emergency rotation require new SSVs and result in ex-SSVs taking a break until the next round of elections. SSVs that are on break do not receive rewards. The SSV election cycle is currently set to one Era, but we are still exploring a more appropriate cycle that can be adjusted through online governance parameters.

#### 3.2.2 Withdrawal

During each Era, elected Special Validators (SSVs) are responsible for signing. However, if an SSV fails to fulfill their responsibilities, they may be withdrawn from their position and banned from participating in the next election. This can occur in two situations:

1. SSV engages in wrongdoing and is penalized by the system through a process known as "slashing,"
2. SSV fails to sign correctly to a significant extent.

If an SSV is withdrawn, they will not generate any rewards for SSV signatures that have not yet been rotated. Additionally, the withdrawn SSV will not be eligible to participate in the next round of elections.

#### 3.2.3 Reward

The rewards for Special Validators (SSVs) are independent from those of regular Supervisory Nodes (SVs). SSVs are responsible for maintaining the security of the Staking Contract through various actions such as adding, deleting, modifying, and monitoring the contract. They also provide reliable support for the Staking process through RPC services. In addition, the StakingDrop feature on StaFi, which is based on price feeds, requires SSVs to operate Oracle services for support. Under the current protocol, there are two main incentives for SSVs: multi-signature service and RPC service.

The reward principle for SSVs is similar to that for producing blocks: more work done results in more rewards. For multi-signature service, rewards are based on the number of times a signature is provided. For RPC service, rewards are based on the number of times the service is called. During each Era, the StaFi protocol sets a corresponding service count. The initial set count is as follows:

<table>
  <tr>
   <td><strong>Service Type</strong>
   </td>
   <td><strong>Signing</strong>
   </td>
   <td><strong>RPC call</strong>
   </td>
  </tr>
  <tr>
   <td>reward counting
   </td>
   <td>20
   </td>
   <td>2
   </td>
  </tr>
</table>

Note: The specific multi-sign technology and RPC call calculation scheme will be described in the StaFi product documentation.

The reward earned by a single SSV in an Era is determined by the proportion of services provided by that SSV, which can be calculated based on the signatures and RPC calls of all SSVs in the Era. For example: if during Era e, an SSV participates in 50 signature operations and 1000 RPC calls, their count for this Era would be 3000. If the total count for Era e is 300000, then the SSV's count represents 1% of the total. As a result, the SSV will receive 1% of the total SSV reward.

The reward distribution period is 1 Era, and the number of rewards is based on the amount of service usage. Since the annual inflation rate is fixed, we set the total rewards given to SSVs each Era as follows:

$P_{S S V}^{e}=P_{\text {Signature }}^{e}+P_{R P C}^{\ell}$

During the early stages of StaFi Contracts, in order to attract as many Special Validators (SSVs) as possible, a smooth transition method of rewarding will be adopted. This is because when the number of SSVs is not at the ideal level, there is a significant risk to contract security. Offering larger incentives to attract SSVs is necessary, but in order to prevent a small number of individuals from receiving the majority of rewards and creating additional pressure for further issuance, it is necessary to set the reward distribution at a reasonable level. Without sufficient data support, the specific distribution of rewards will be led by the Foundation during the transition period. Meanwhile, a reward cap will be implemented to reduce the pressure for further issuance. Any excess rewards will be transferred to the Protocol Treasury. After a smooth transition to a reasonable level, rewards will be optimized through algorithms and automatically distributed to SSVs, achieving fully automated methods of motivation.

#### 3.2.4 Slash

There are two types of punishments for SSVs (primarily for multi-signature services). The first occurs when an SSV fails to sign during the signature phase, and the second occurs when they provide incorrect signatures. Both actions may result in the same outcome, which is that the minimum required number of signers is not met in the N/M multi-signature system. SSVs that fail to provide signatures or provide incorrect signatures pose a potential threat to the security of Staking contracts.

In the multi-signature phase, an SSV's signature is needed to help the system perform various tasks, including enabling user operations and online rotation. If an SSV fails to sign, it is generally considered to be offline or unresponsive. If a signature is not provided in an Era and no Heartbeat detection is sent, the SSV is considered unresponsive. If this behavior is not addressed through an exit strategy, the SSV will be slashed. Additionally, in the multi-signature phase, if an SSV provides an incorrect signature, the signature will not be recognized by the system. If this happens repeatedly, the SSV may be withdrawn or slashed.

StaFi Protocol sets a threshold in the multi-signature system. If this threshold is not met, the assets of a Staking Contract are at risk. As a result, slashing often occurs in conjunction with withdrawal as follows:

* If the number of SSVs that fail to provide signatures or provide incorrect signatures is less than 2/3 of the threshold, the proportion of SSVs that are slashed is small and they will not be withdrawn.
* If the number of SSVs that fail to provide signatures or provide incorrect signatures is greater than 2/3 of the threshold, the proportion of SSVs that are slashed is high and they will be withdrawn in the next Era.

The system will slash SSVs that exhibit either of the aforementioned two signature issues, as the lack of a signature is equivalent to providing incorrect signatures in terms of the damage to the system. Therefore, the formula for punishment is the same for both scenarios:

$\min \left(((3 *(k-n / 10)) / n)^{2}, 1\right) * 0.1$

n is the number of validators, k is the number of SSVs that provide signature issues. \

Assuming n=21, and the signature threshold is 12,

When k &lt; = 2, the proportion of Slash is 0.

When k = 3, the proportion of Slash is 0.002.

When k = 4, the proportion of Slash is 0.00814.

When k = 5, the proportion of Slash is 0.01836.

...

When k = 8, the result is 0.07346.

When k > = 9, the result is 0.1


### 3.3 Inflation

The rewards for SVs and SSVs are derived from system inflation, similar to the mechanism in Bitcoin. StaFi Protocol will generate new FIS every single time a new block is produced, which is used to motivate SVs and SSVs to provide computing and storage resources. The control of the inflation rate is an economic issue. Based on historical data, the annual inflation rate of PoS projects lies typically between 5% and 20%.

There are several factors that influence the inflation rate of StaFi Protocol:

$I=I_{N P o S}-I_{\text {Slashing }}-I_{T x-f e e}$

Of which:

$I_{N P o S}=I_{S V}+I_{S S V}$

I<sub>npos</sub> represents the system consensus rewards, including both rewards for SVs and SSVs. FIS tokens from Slash and transaction fees are distributed to the reporter and added to the Protocol Treasury.

I<sub>sv</sub> is affected by the staking rate. The higher the staking rate, the more secure the system is, and vice versa. A higher staking ratio also means less liquidity for the token. In the FIS design, the inflation rate is dynamically adjusted based on the proportion of staked tokens. When the proportion of staked tokens increases, the system reduces the motivation. When it decreases, the motivation increases. The StaFi Protocol has identified an ideal staking ratio of 50%, beyond which the incentive will no longer increase. The range for I<sub>sv</sub> is between 2.5% and 10%. The motivation curve is as follow; In the first year, the further issuance ratio is 10%. If the staking rate is below the ideal level, excess rewards will be transferred to the Protocol Treasury.

![alt_text](images/tokenomics1.png)


The I<sub>ssv</sub> is related to service calls, including multi-signature and RPC calls, which are frequently required during the staking process. These calls are incentivized by the system, with a fixed percentage increase in rewards initially set in the range of [1,2] by the protocol. The rewards for each call are accumulated over an era, and if the total calling rewards exceed the additional issuance for the era, the rewards for multiple-unit calls will be reduced accordingly. This strategy will be flexible for the first year after the mainnet launch and will then be determined by the community through online governance.

The I<sub>slash</sub> inflation is not a fixed number and is not expected to have a significant impact on the overall inflation rate due to the rarity of serious accidents, such as double-signing, which are often caused by human error rather than the protocol.

The I<sub>tx-fee</sub> inflation is also not a definite figure and will depend on the usage of the StaFi network, particularly the adoption of rToken. It is currently difficult to evaluate, but as rToken usage increases, it is expected to contribute to a reduction in inflation.


## 4.Tokens

### 4.1 FIS

FIS is the native token on StaFi Protocol. It has an initial issuance of 100 million and will have further issuances each year. FIS serves a similar function in StaFi as DOT does in Polkadot, acting as a means of preventing system abuse and value capture. In StaFi, FIS has the following specific functions:

1. Staking: Validators on the StaFi consensus must stake FIS to participate, and nominators who wish to earn rewards must also stake FIS to nominate.
2. Transaction fees: In order to prevent system abuse, the initiator of a transaction must pay a fee in FIS to access computing resources. This helps to eliminate invalid transactions.
3. On-chain governance: FIS holders may participate in the modification of StaFi Protocol parameters, vote for protocol upgrades and help determine development plans. Anyone may submit proposals to the protocol, but only FIS holders can vote on them, with each FIS representing one vote.


### 4.2 rToken (reward-Token)

rTokens are a type of alternative token that is obtained by stakers through a staking contract. For example, when staking XTZ, stakers will receive rXTZ. rTokens and the staked tokens are at 1:1 ratio. Holding rTokens allows you to earn rewards from the staked tokens. Additionally, rTokens can be traded on the market instead of the staked tokens.

There is no limit on the number of rTokens that can be issued, and in theory, it is equal to the total number of tokens that are integrated in proof-of-stake (PoS) projects. When rTokens are redeemed, there is a burning mechanism in place to maintain a 1:1 ratio with the staked tokens.

#### 4.2.1 Roles

On StaFi Protocol, rTokens serve several key roles:

1. Earning Staking Rewards: rTokens represent staked tokens. Rewards earned through staking are sent to rToken holders. During the redemption period, rTokens are locked and its reward-earning capabilities are temporarily suspended.
2. Trading: rTokens are tradeable and, upon a transaction, the associated motivation and redemption rights are transferred. StaFi Protocol aims to increase the trading liquidity of rTokens by listing it and its corresponding Staking Token pairs on centralized and decentralized exchanges.
3. Redemption: rTokens are the only method for redeeming staked tokens. rToken holders may initiate a redemption to the Staking contract, during which their motivation rights are suspended and rToken is locked. Once the Staking Tokens are unlocked on the original chain, they are returned to the user's account.

#### 4.2.2 Distribution

As rToken holders, individuals are able to earn the yields of Staking Tokens, but also bear the risk of those tokens being slashed by the original chain. The Staking Contract monitors the rewards and slashing of Staking Tokens and automatically corrects any discrepancies.

The transfer of rTokens are not restricted, which can lead to a lag in cross-chain communication when it comes to correcting rewards and slashing. This can result in a discrepancy between the correction record and the number of rewards on the original chain, particularly for Staking Tokens that distribute rewards off-chain. The Staking Contract also handles slashing with caution, as it is the Staking Tokens themselves that are at risk of being slashed.

In terms of distributing the rights associated with rToken, we currently prefer to adopt a simpler and more straightforward approach, prioritizing the joint bearing of risks in order to maximize benefits. In the future, we plan to access more staking projects and explore distribution methods that are more closely aligned with those on the original chain through data monitoring. 

StaFi may also consider introducing external "assistance" to help mitigate risks, such as slash insurance which may protect stakers from financial losses in the event of a slash. As we move forward, we will continue to explore reward distribution and slashing mechanisms for different projects with the goal of tailoring our approach to various types of projects. At this stage, the design of various Proof-of-Stake projects tends to be similar, allowing us to design a unified distribution mechanism. \


## 5.Fee

### 5.1 Tx Fee

To prevent resource abuse, the Protocol imposes a transaction fee (tx fee) for each transaction. The initiator of the transaction must have a small amount of FIS in their account to initiate the transaction. The calculation of the tx fee is complex and takes into account factors such as CPU usage, bandwidth, and storage. It is also important to design a mechanism that can dynamically adjust the tx fee as technology and transaction usage evolves.

In the Ethereum model and other projects, the Gas/Gas Fee model is commonly used. The Gas Fee is calculated based on the computing work and bandwidth and storage required for each transaction. On StaFi Protocol, the Gas Fee is settled in FIS, but the calculation differs from that of bandwidth and storage. A transaction needs to be stored in a block for an extended period, but the calculation of computing work and bandwidth is cleared at the time of sending. Therefore, in the specific calculation, only the size of 1 CPU instruction and the transaction size (in bytes) need to be considered to determine the Gas consumed by the current transaction (computing and bandwidth only).

$Gas_{tx} = numberOfCPUinstructions(tx) + α * lengthOf(tx)$

Of which α refers to the relationship between a CPU instruction and bandwidth, and is generally set to a constant.

It is critical for developers and users to be able to estimate the Gas usage of a transaction or contract execution in the Ethereum network. This is because the Gas model relies on two key parameters:  \

1. Gaslimit: the maximum Gas that can be used within one block

2. Gasused: the real Gas usage in a block

If Gasused approaches Gaslimit, it may be necessary to increase Gaslimit in order to ensure that the computation performed by validators and other resources is sufficient. This, in turn, may require a significant amount of motivation in order to design and implement the necessary changes.

$\text { GasFee }_{t x}^{\prime}=\text { GasFee }_{t x} * \beta$

On StaFi Protocol, the transaction fee (tx fee) is calculated using a method similar to the Gas model used in Ethereum. One key difference is the use of a flexible parameter, β, which is used to adjust the appropriate level of motivation for processing the transaction.

To determine the tx fee, StaFi protocol considers several transaction parameters:

* Length: The size of a transaction in bytes
* Time: Time required to process data storage
* Memory: Memory size used to process transactions
* State: State storage size

By taking these values into account, the tx fee required to process the transaction can be calculated. To simplify this process, the concept of Weight is defined as a combination of duration and state. Overall, this process allows for the determination of the appropriate tx fee needed to ensure the necessary level of motivation for processing transactions on the StaFi network.
$\text { Fee } \left._{t x}=c_{\text {traffic }} *(\text { basefee }+ \text { type }(t x) * l e n t h O f(t x))+\text { weight }(t x)\right)$

The C<sub>traffic</sub> parameter is dynamically adjusted according to the current network transaction activity, and the tpye(tx) parameter is dynamically adjusted based on the type of transaction. The adjustment of these dynamic parameters takes into account various factors, including user experience, developer friendliness, resource utilization, and validator compensation. The adjustment frequency is determined by the period of producing one block, a concept borrowed from BTC where miners vote on important parameter settings such as block size.

StaFi Protocol also classifies transactions and assigns priorities to different transaction types. Each block reserves space for transactions of higher priority to ensure that important transactions can be processed promptly. For common transactions such as transfers, the tx fee must be increased to "compete" for space in the block. In general, transactions with higher tx fees are given priority.

All transaction fees collected through the protocol are distributed to Validators (SV) and the Treasury (Protocol Treasury) in predetermined proportions, which can be modified through community governance. The use of these transaction fee revenues by the treasury will be outlined in a later section.


### 5.2. Liquidity Fee

Stakers can participate in staking through Staking Contracts to receive rTokens. When a user holds rTokens, they will receive an annualized percentage of rewards from the original chain. The size of the rewards varies among different original blockchains, but they generally follow a similar structure. rToken represents the potential of liquid collateral assets. Stakers can choose to hold onto rToken to earn income or trade it on the market. When rToken is transferred, its associated functions and rights are transferred to the buyer, providing liquidity for the original rToken holder through StaFi Protocol. However, StaFi Protocol will charge a fee for rewards earned during the holding period of rToken in order to maintain network operations.

When rToken is transferred or used to redeem the original asset, a fee is charged by the system. This fee is proportional to the rewards received during the staking period.

$\text { Fee }_{\text {liquidity }}=\alpha * \text { payout }_{\text {stakingreward }}$

The α parameter is a percentage of the tx fee that can be dynamically adjusted through on-chain governance. During the initial stages of protocol development, the foundation will lead the fee adjustment until the system is stable and ready to be transferred to community governance.

The tx fee can be paid in either Staking Token or FIS. All handling fees will be added to a public pool. The transaction fee income in the pool serves various purposes. A majority of it will be used to buy back and burn FIS. A small portion will be distributed to the Foundation, and a portion will also be allocated to the team in the early stages to support the development of early Staking Contracts.

In the early stages of the project, it is reasonable to destroy less than the inflation rate, as funding is needed during the development phase to improve the product. Once the product is finalized and widely adopted by users, StaFi Protocol may generate revenue for stakers and capture the value of the liquidity provided by stakers who use the protocol. As a result, the protocol's gains will increase over time.


## 6.Protocol Treasury

To ensure the sustainable development and decentralization of StaFi, the Protocol Treasury was designed to motivate individuals or teams who contribute to the project. Access to the Protocol Treasury must be approved through online governance. Developers may submit proposals to the public and receive motivation from the Protocol Treasury if the proposal is voted through.

During the initial phase of the project, the Protocol Treasury primarily provides motivation for contributions in the following areas.

1. Developing new Staking Contracts, e.g. integrate new Staking Contracts for StaFi.
2. Developing new Protocols, e.g. develop other types of pledge composite tokens
3. Developing rToken derivatives, e.g. develop staking node products that are based on rToken

Protocol Treasury collected from 4 transaction types outlined:

1. A portion of circulation tx fees: When a user obtains liquidity through rTokens, a portion of the tx fees charged will be added to the Protocol Treasury.
2. A portion of transaction tx fees: Transaction tx fees will be partially rewarded to validators and partially added to the Protocol Treasury.
3. A portion of slash forfeits: Forfeits slashed from SVs and SSVs will be partially rewarded to reporters and partially added to the Protocol Treasury.
4. A portion of staking rewards: When the staking ratio falls below the ideal 50%, the excess rewards from inflation will be added to the Protocol Treasury.

$potocolReward_t=protocolPct * (fee_{liquidity+tx}+reward_{inflation}+slash)$


## 7.Future Protocol Developments

The Tokenomics of StaFi Protocol primarily covers the motivation, punishment, and value capture mechanisms within the protocol. The motivation and punishment of SSVs are independent of the Substrate mechanism. Ideally, we would like to have a more accurate estimation of the application of projects, nonetheless, it is difficult to achieve at the current stage. Therefore, we have taken a cautious approach, which is not yet optimal. Future developments include optimizing our mechanism design based on extensive data and operational experience.

Value capture is a crucial mechanism for the StaFi Protocol. By providing liquidity, we charge tx fees for transactions and return the values created by the protocol to the system participants who have contributed valuable resources.

As a derivative of the StaFi Protocol, rTokens serves various purposes in addition to being a medium for liquidity. Firstly, it allows staked tokens to be transferred to other ecosystems through the StaFi Protocol. Secondly, it has the potential to be re-derived as a new asset. Finally, rToken can be integrated into existing ecosystems as collateral or used in loans. However, we acknowledge that re-derivation may pose challenges such as stability of pegging and structural risks of interconnected DeFi projects. We will address these issues as well.

Another aspect of rToken is the distribution of rights, including reward distribution and risk sharing for slash events. The mechanism for reward distribution varies among different PoS projects and there may be a lag in communication between Staking Contracts and outer chains, leading to inconsistency with the original chain in terms of right distribution. Some projects even adopt off-chain distribution. Given these factors, it is difficult to clearly define the rights for Staking Contracts. Therefore, in the current stage, we have decided to have everyone share the risk appetite. While this is a practical approach, it is not ideal. As the project progresses, we will devote more time and energy to this issue.

In the future, StaFi aims to be a platform for the re-derivation of locked assets. In addition to staking assets, any locked assets can be circulated through StaFi's Staking Contracts. The new token may differ from rToken, StaFi will be a platform for staking derivatives once we develop a set of SDKs.


## 8.NOTICE AND DISCLAIMER

PLEASE READ THE ENTIRETY OF THIS "NOTICE AND DISCLAIMER" SECTION CAREFULLY. NOTHING HEREIN CONSTITUTES LEGAL, FINANCIAL, BUSINESS OR TAX ADVICE AND YOU SHOULD CONSULT YOUR OWN LEGAL, FINANCIAL, TAX OR OTHER PROFESSIONAL ADVISOR(S) BEFORE ENGAGING IN ANY ACTIVITY IN CONNECTION HEREWITH. NEITHER STAFI TECHNOLOGY LTD (THE FOUNDATION), ANY OF THE PROJECT TEAM MEMBERS (THE STAFI TEAM) WHO HAVE WORKED ON THE STAFI PROTOCOL (AS DEFINED HEREIN) OR PROJECT TO DEVELOP THE STAFI PROTOCOL IN ANY WAY WHATSOEVER, ANY DISTRIBUTOR/VENDOR OF FIS TOKENS (THE DISTRIBUTOR), NOR ANY SERVICE PROVIDER SHALL BE LIABLE FOR ANY KIND OF DIRECT OR INDIRECT DAMAGE OR LOSS WHATSOEVER WHICH YOU MAY SUFFER IN CONNECTION WITH ACCESSING THIS WHITEPAPER, THE WEBSITE AT[ HTTPS://WWW.STAFI.IO/](https://www.stafi.io/) (THE WEBSITE) OR ANY OTHER WEBSITES OR MATERIALS PUBLISHED BY THE FOUNDATION.

**Nature of the Whitepaper:** The Whitepaper and the Website are intended for general informational purposes only and do not constitute a prospectus, an offer document, an offer of securities, a solicitation for investment, or any offer to sell any product, item or asset (whether digital or otherwise). The information herein may not be exhaustive and does not imply any element of a contractual relationship. There is no assurance as to the accuracy or completeness of such information and no representation, warranty or undertaking is or purported to be provided as to the accuracy or completeness of such information. Where the Whitepaper or the Website includes information that has been obtained from third party sources, the Foundation, the Distributor, their respective affiliates and/or the Stafi team have not independently verified the accuracy or completion of such information. Further, you acknowledge that circumstances may change and that the Whitepaper or the Website may become outdated as a result; and neither the Foundation nor the Distributor is under any obligation to update or correct this document in connection therewith.

**Token Documentation:** Nothing in the Whitepaper or the Website constitutes any offer by the Foundation, the Distributor or the Stafi team to sell any FIS (as defined herein) nor shall it or any part of it nor the fact of its presentation form the basis of, or be relied upon in connection with, any contract or investment decision. Nothing contained in the Whitepaper or the Website is or may be relied upon as a promise, representation or undertaking as to the future performance of the Stafi protocol. The agreement between the Distributor (or any third party) and you, in relation to any sale, purchase, or other distribution or transfer of FIS, is to be governed only by the separate terms and conditions of such agreement.

The information set out in the Whitepaper and the Website is for community discussion only and is not legally binding. No person is bound to enter into any contract or binding legal commitment in relation to the acquisition of FIS, and no virtual currency or other form of payment is to be accepted on the basis of the Whitepaper or the Website. The agreement for sale and purchase of FIS and/or continued holding of FIS shall be governed by a separate set of Terms and Conditions or Token Purchase Agreement (as the case may be) setting out the terms of such purchase and/or continued holding of FIS (the Terms and Conditions), which shall be separately provided to you or made available on the Website. The Terms and Conditions Documentation must be read together with the Whitepaper. In the event of any inconsistencies between the Terms and Conditions and the Whitepaper or the Website, the Terms and Conditions shall prevail.

**Deemed Representations and Warranties:** By accessing the Whitepaper or the Website (or any part thereof), you shall be deemed to represent and warrant to the Foundation, the Distributor, their respective affiliates, and the Stafi team as follows:

(a) in any decision to purchase any FIS, you have shall not rely on any statement set out in the Whitepaper or the Website;

(b) you will and shall at your own expense ensure compliance with all laws, regulatory requirements and restrictions applicable to you (as the case may be);

(c) you acknowledge, understand and agree that FIS may have no value, there is no guarantee or representation of value or liquidity for FIS, and FIS is not an investment product including for any speculative investment;

(d) none of the Foundation, the Distributor, their respective affiliates, and/or the Stafi team members shall be responsible for or liable for the value of FIS, the transferability and/or liquidity of FIS and/or the availability of any market for FIS through third parties or otherwise; and

(e) you acknowledge, understand and agree that you are not eligible to purchase any FIS if you are a citizen, national, resident (tax or otherwise), domiciliary and/or green card holder of a geographic area or country (i) where it is likely that the sale of FIS would be construed as the sale of a security (howsoever named), financial service or investment product and/or (ii) where participation in token sales is prohibited by applicable law, decree, regulation, treaty, or administrative act (including without limitation the United States of America, Canada, New Zealand, People's Republic of China (but not including the special administrative regions of Hong Kong and Macau, and the territory of Taiwan), Thailand, and the Socialist Republic of Vietnam); and to this effect you agree to provide all such identify verification document when requested in order for the relevant checks to be carried out.

The Foundation, the Distributor and the Stafi team do not and do not purport to make, and hereby disclaims, all representations, warranties or undertaking to any entity or person (including without limitation warranties as to the accuracy, completeness, timeliness or reliability of the contents of the Whitepaper or the Website, or any other materials published by the Foundation or the Distributor). To the maximum extent permitted by law, the Foundation, the Distributor, their respective affiliates and service providers shall not be liable for any indirect, special, incidental, consequential or other losses of any kind, in tort, contract or otherwise (including, without limitation, any liability arising from default or negligence on the part of any of them, or any loss of revenue, income or profits, and loss of use or data) arising from the use of the Whitepaper or the Website, or any other materials published, or its contents (including without limitation any errors or omissions) or otherwise arising in connection with the same. Prospective purchasers of FIS should carefully consider and evaluate all risks and uncertainties (including financial and legal risks and uncertainties) associated with the FIS token sale, the Foundation, the Distributor and the Stafi team.

**Token features:** It is highlighted that FIS:

(a) does not have any tangible or physical manifestation, and does not have any intrinsic value (nor does any person make any representation or give any commitment as to its value);

(b) is non-refundable and cannot be exchanged for cash (or its equivalent value in any other virtual currency) or any payment obligation by the Foundation, the Distributor or any of their respective affiliates;

(c) does not represent or confer on the token holder any right of any form with respect to the Foundation, the Distributor (or any of their respective affiliates), or its revenues or assets, including without limitation any right to receive future dividends, revenue, shares, ownership right or stake, share or security, any voting, distribution, redemption, liquidation, proprietary (including all forms of intellectual property or licence rights), right to receive accounts, financial statements or other financial data, the right to requisition or participate in shareholder meetings, the right to nominate a director, or other financial or legal rights or equivalent rights, or intellectual property rights or any other form of participation in or relating to the Stafi protocol, the Foundation, the Distributor and/or their service providers;

(d) is not intended to represent any rights under a contract for differences or under any other contract the purpose or pretended purpose of which is to secure a profit or avoid a loss;

(e) is not intended to be a representation of money (including electronic money), security, commodity, bond, debt instrument, unit in a collective investment scheme or any other kind of financial instrument or investment;

(f) is not a loan to the Foundation, the Distributor or any of their respective affiliates, is not intended to represent a debt owed by the Foundation, the Distributor or any of their respective affiliates, and there is no expectation of profit; and

(g) does not provide the token holder with any ownership or other interest in the Foundation, the Distributor or any of their respective affiliates.

The contributions in the token sale will be held by the Distributor (or their respective affiliate) after the token sale, and contributors will have no economic or legal right over or beneficial interest in these contributions or the assets of that entity after the token sale.

To the extent a secondary market or exchange for trading FIS does develop, it would be run and operated wholly independently of the Foundation, the Distributor, the sale of FIS and the Stafi protocol. Neither the Foundation nor the Distributor will create such secondary markets nor will either entity act as an exchange for FIS.

**Informational purposes only:** The information set out herein is only conceptual, and describes the future development goals for the Stafi protocol to be developed. In particular, the project roadmap in the Whitepaper is being shared in order to outline some of the plans of the Stafi team, and is provided solely for INFORMATIONAL PURPOSES and does not constitute any binding commitment. Please do not rely on this information in making purchasing decisions because ultimately, the development, release, and timing of any products, features or functionality remains at the sole discretion of the Foundation, the Distributor or their respective affiliates, and is subject to change. Further, the Whitepaper or the Website may be amended or replaced from time to time. There are no obligations to update the Whitepaper or the Website, or to provide recipients with access to any information beyond what is provided herein.

**Regulatory approval:** No regulatory authority has examined or approved, whether formally or informally, of any of the information set out in the Whitepaper or the Website. No such action or assurance has been or will be taken under the laws, regulatory requirements or rules of any jurisdiction. The publication, distribution or dissemination of the Whitepaper or the Website does not imply that the applicable laws, regulatory requirements or rules have been complied with.

**Cautionary Note on forward-looking statements:** All statements contained herein, statements made in press releases or in any place accessible by the public and oral statements that may be made by the Foundation, the Distributor and/or the Stafi team, may constitute forward-looking statements (including statements regarding intent, belief or current expectations with respect to market conditions, business strategy and plans, financial condition, specific provisions and risk management practices). You are cautioned not to place undue reliance on these forward-looking statements given that these statements involve known and unknown risks, uncertainties and other factors that may cause the actual future results to be materially different from that described by such forward-looking statements, and no independent third party has reviewed the reasonableness of any such statements or assumptions. These forward-looking statements are applicable only as of the date indicated in the Whitepaper, and the Foundation, the Distributor as well as the Stafi team expressly disclaim any responsibility (whether express or implied) to release any revisions to these forward-looking statements to reflect events after such date.

**References to companies and platforms:** The use of any company and/or platform names or trademarks herein (save for those which relate to the Foundation, the Distributor or their respective affiliates) does not imply any affiliation with, or endorsement by, any third party. References in the Whitepaper or the Website to specific companies and platforms are for illustrative purposes only.

**English language:** The Whitepaper and the Website may be translated into a language other than English for reference purpose only and in the event of conflict or ambiguity between the English language version and translated versions of the Whitepaper or the Website, the English language versions shall prevail. You acknowledge that you have read and understood the English language version of the Whitepaper and the Website.

**No Distribution:** No part of the Whitepaper or the Website is to be copied, reproduced, distributed or disseminated in any way without the prior written consent of the Foundation or the Distributor. By attending any presentation on this Whitepaper or by accepting any hard or soft copy of the Whitepaper, you agree to be bound by the foregoing limitations.
